<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Real-time weather forecasting for all Indian states and districts with live updates">
  <title>Real-Time Weather India</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwindcss.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Plus Jakarta Sans', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-sans">
  <div id="app" class="h-full overflow-auto weather-gradient text-white transition-all duration-500"><!-- Header -->
   <header class="sticky top-0 z-50 glass-card border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 py-4">
     <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div class="flex items-center gap-3">
       <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
        </svg>
       </div>
       <div>
        <h1 id="app-title" class="text-lg md:text-xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent">Real-Time Weather India</h1>
        <div id="live-indicator" class="flex items-center gap-1 text-xs text-green-400"><span class="w-2 h-2 rounded-full bg-green-400 live-pulse"></span> <span>Live</span>
        </div>
       </div>
      </div>
      <div class="flex items-center gap-3"><button id="theme-toggle" class="p-2 rounded-lg glass-card hover:bg-white/20 transition-colors" title="Toggle theme">
        <svg id="moon-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0112 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
        <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 0 018 0z" />
        </svg></button>
      </div>
     </div><!-- Location Selectors -->
     <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
      <div><label class="block text-xs text-white/60 mb-1">State / Territory</label> <select id="state-select" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50"> <option value="">Select State</option> </select>
      </div>
      <div><label class="block text-xs text-white/60 mb-1">District</label> <select id="district-select" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50 disabled:opacity-50"> <option value="">Select District</option> </select>
      </div>
      <div><label class="block text-xs text-white/60 mb-1">Quick Search</label>
       <div class="relative"><input type="text" id="search-input" placeholder="Search city..." class="w-full px-3 py-2 pl-9 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50">
        <svg class="absolute left-3 top-2.5 w-4 h-4 text-white/40" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
       </div>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main class="max-w-7xl mx-auto px-4 py-6"><!-- Welcome State -->
    <div id="welcome-state" class="glass-card rounded-2xl p-8 text-center slide-in">
     <div class="w-20 h-20 mx-auto mb-6">
      <svg class="w-full h-full text-blue-400 weather-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
      </svg>
     </div>
     <h2 class="text-2xl font-bold mb-2">Welcome to Real-Time Weather India</h2>
     <p class="text-white/60 max-w-md mx-auto mb-6">Get live weather updates. Select a state, district, or search for any city to get started.</p><!-- Popular Cities -->
     <div class="mt-8 pt-6 border-t border-white/10">
      <p class="text-sm text-white/40 mb-4">Quick Access - Popular Cities</p>
      <div class="flex flex-wrap justify-center gap-2" id="popular-cities"><button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="New Delhi" data-lat="28.6139" data-lon="77.2090">ğŸ›ï¸ Delhi</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Mumbai" data-lat="19.0760" data-lon="72.8777">ğŸŒŠ Mumbai</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Bangalore" data-lat="12.9716" data-lon="77.5946">ğŸ™ï¸ Bangalore</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Chennai" data-lat="13.0827" data-lon="80.2707">ğŸ–ï¸ Chennai</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Kolkata" data-lat="22.5726" data-lon="88.3639">ğŸ›ï¸ Kolkata</button>
      </div>
     </div>
    </div><!-- Loading State -->
    <div id="loading-state" class="hidden flex flex-col items-center justify-center py-20">
     <div class="spinner"></div>
     <p class="mt-4 text-white/60">Fetching live weather data...</p>
    </div><!-- Error State -->
    <div id="error-state" class="hidden glass-card rounded-2xl p-8 text-center">
     <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center">
      <svg class="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
     </div>
     <h3 class="text-xl font-semibold text-red-400">Unable to Fetch Weather</h3>
     <p id="error-message" class="mt-2 text-white/60">Please try selecting a different location.</p><button id="retry-btn" class="mt-4 px-6 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 transition-colors text-sm font-semibold"> Try Again </button>
    </div><!-- Weather Dashboard -->
    <div id="weather-content" class="hidden space-y-6"><!-- Current Weather Card -->
     <div class="glass-card rounded-2xl p-6 slide-in">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
       <div class="flex items-center gap-6">
        <div id="current-weather-icon" class="w-24 h-24 md:w-32 md:h-32 weather-icon text-center">
         â˜€ï¸
        </div>
        <div>
         <div class="flex items-center gap-2 mb-1">
          <p class="text-white/60 text-sm">Current Weather</p><span class="w-2 h-2 rounded-full bg-green-400"></span>
         </div>
         <h2 id="current-location" class="text-2xl md:text-3xl font-bold">--</h2>
         <p id="current-datetime" class="text-white/60 text-sm mt-1">--</p>
         <div class="flex items-baseline gap-2 mt-2"><span id="current-temp" class="text-5xl md:text-6xl font-light">--</span> <span class="text-2xl text-white/60">Â°C</span>
         </div>
         <p id="current-condition" class="text-lg text-white/80 mt-1">--</p>
        </div>
       </div>
       <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-2 gap-3">
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ’§ Humidity
         </div>
         <p id="current-humidity" class="text-xl font-semibold">--%</p>
        </div>
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ’¨ Wind
         </div>
         <p id="current-wind" class="text-xl font-semibold">-- km/h</p>
        </div>
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ”½ Pressure
         </div>
         <p id="current-pressure" class="text-xl font-semibold">-- hPa</p>
        </div>
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ‘ï¸ Visibility
         </div>
         <p id="current-visibility" class="text-xl font-semibold">-- km</p>
        </div>
       </div>
      </div>
      <div class="mt-6 pt-6 border-t border-white/10 grid grid-cols-2 sm:grid-cols-5 gap-4 text-center">
       <div>
        <p class="text-white/60 text-xs">Feels Like</p>
        <p id="feels-like" class="text-lg font-semibold">--Â°C</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">UV Index</p>
        <p id="uv-index" class="text-lg font-semibold">--</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">Rain Prob</p>
        <p id="rain-prob" class="text-lg font-semibold">--%</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">Cloud Cover</p>
        <p id="cloud-cover" class="text-lg font-semibold">--%</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">Last Update</p>
        <p id="last-update-time" class="text-lg font-semibold">--</p>
       </div>
      </div>
     </div><!-- Hourly Forecast -->
     <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.1s;">
      <h3 class="text-lg font-semibold mb-4">â° Next 24 Hours</h3>
      <div id="hourly-forecast" class="flex gap-3 overflow-x-auto pb-3 -mx-2 px-2"><!-- Hourly items inserted here -->
      </div>
     </div><!-- 7 Day Forecast -->
     <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.2s;">
      <h3 class="text-lg font-semibold mb-4">ğŸ“… 7 Day Forecast</h3>
      <div id="daily-forecast" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3"><!-- Daily items inserted here -->
      </div>
     </div><!-- Sunrise/Sunset & Wind Details -->
     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.3s;">
       <h3 class="text-lg font-semibold mb-4">ğŸŒ… Sunrise &amp; Sunset</h3>
       <div class="flex justify-around items-center">
        <div class="text-center">
         <div class="w-16 h-16 mx-auto mb-2 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center">
          ğŸŒ…
         </div>
         <p class="text-white/60 text-xs">Sunrise</p>
         <p id="sunrise" class="text-xl font-semibold">--:--</p>
        </div>
        <div class="h-16 w-px bg-white/20"></div>
        <div class="text-center">
         <div class="w-16 h-16 mx-auto mb-2 rounded-full bg-gradient-to-br from-orange-500 to-purple-600 flex items-center justify-center">
          ğŸŒ‡
         </div>
         <p class="text-white/60 text-xs">Sunset</p>
         <p id="sunset" class="text-xl font-semibold">--:--</p>
        </div>
       </div>
      </div>
      <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.4s;">
       <h3 class="text-lg font-semibold mb-4">ğŸ’¨ Wind Details</h3>
       <div class="space-y-3">
        <div class="flex justify-between items-center"><span class="text-white/60 text-sm">Speed</span>
         <p id="wind-speed" class="text-lg font-semibold">-- km/h</p>
        </div>
        <div class="flex justify-between items-center"><span class="text-white/60 text-sm">Direction</span>
         <p id="wind-dir-text" class="text-lg font-semibold">--</p>
        </div>
        <div class="flex justify-between items-center"><span class="text-white/60 text-sm">Gusts</span>
         <p id="wind-gusts" class="text-lg font-semibold">-- km/h</p>
        </div>
       </div>
      </div>
     </div><!-- Alerts -->
     <div id="alert-container"></div>
    </div>
   </main><!-- Footer -->
   <footer class="max-w-7xl mx-auto px-4 py-4 border-t border-white/10 text-xs text-white/40">
    <div class="flex flex-col sm:flex-row justify-between items-center gap-2">
     <p id="footer-text">Live weather updates every 5 minutes</p>
     <p>Next auto-update: <span id="next-update-time">--:--</span></p>
    </div>
   </footer>
  </div>
  <script type="module" src="assets/js/main.js"></script>
 </body>
</html>
<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Real-time weather forecasting for all Indian states and districts with live updates">
  <title>Real-Time Weather India</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwindcss.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Plus Jakarta Sans', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-sans">
  <div id="app" class="h-full overflow-auto weather-gradient text-white transition-all duration-500"><!-- Header -->
   <header class="sticky top-0 z-50 glass-card border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 py-4">
     <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div class="flex items-center gap-3">
       <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
        </svg>
       </div>
       <div>
        <h1 id="app-title" class="text-lg md:text-xl font-bold bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent">Real-Time Weather India</h1>
        <div id="live-indicator" class="flex items-center gap-1 text-xs text-green-400"><span class="w-2 h-2 rounded-full bg-green-400 live-pulse"></span> <span>Live</span>
        </div>
       </div>
      </div>
      <div class="flex items-center gap-3"><button id="theme-toggle" class="p-2 rounded-lg glass-card hover:bg-white/20 transition-colors" title="Toggle theme">
        <svg id="moon-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0112 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
        <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg></button>
      </div>
     </div><!-- Location Selectors -->
     <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
      <div><label class="block text-xs text-white/60 mb-1">State / Territory</label> <select id="state-select" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50"> <option value="">Select State</option> </select>
      </div>
      <div><label class="block text-xs text-white/60 mb-1">District</label> <select id="district-select" class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50 disabled:opacity-50"> <option value="">Select District</option> </select>
      </div>
      <div><label class="block text-xs text-white/60 mb-1">Quick Search</label>
       <div class="relative"><input type="text" id="search-input" placeholder="Search city..." class="w-full px-3 py-2 pl-9 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400/50">
        <svg class="absolute left-3 top-2.5 w-4 h-4 text-white/40" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
       </div>
      </div>
     </div>
    </div>
   </header><!-- Main Content -->
   <main class="max-w-7xl mx-auto px-4 py-6"><!-- Welcome State -->
    <div id="welcome-state" class="glass-card rounded-2xl p-8 text-center slide-in">
     <div class="w-20 h-20 mx-auto mb-6">
      <svg class="w-full h-full text-blue-400 weather-icon" viewbox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
      </svg>
     </div>
     <h2 class="text-2xl font-bold mb-2">Welcome to Real-Time Weather India</h2>
     <p class="text-white/60 max-w-md mx-auto mb-6">Get live weather updates. Select a state, district, or search for any city to get started.</p><!-- Popular Cities -->
     <div class="mt-8 pt-6 border-t border-white/10">
      <p class="text-sm text-white/40 mb-4">Quick Access - Popular Cities</p>
      <div class="flex flex-wrap justify-center gap-2" id="popular-cities"><button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="New Delhi" data-lat="28.6139" data-lon="77.2090">ğŸ›ï¸ Delhi</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Mumbai" data-lat="19.0760" data-lon="72.8777">ğŸŒŠ Mumbai</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Bangalore" data-lat="12.9716" data-lon="77.5946">ğŸ™ï¸ Bangalore</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Chennai" data-lat="13.0827" data-lon="80.2707">ğŸ–ï¸ Chennai</button> <button class="city-btn px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 text-sm transition-colors" data-city="Kolkata" data-lat="22.5726" data-lon="88.3639">ğŸ›ï¸ Kolkata</button>
      </div>
     </div>
    </div><!-- Loading State -->
    <div id="loading-state" class="hidden flex flex-col items-center justify-center py-20">
     <div class="spinner"></div>
     <p class="mt-4 text-white/60">Fetching live weather data...</p>
    </div><!-- Error State -->
    <div id="error-state" class="hidden glass-card rounded-2xl p-8 text-center">
     <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center">
      <svg class="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
     </div>
     <h3 class="text-xl font-semibold text-red-400">Unable to Fetch Weather</h3>
     <p id="error-message" class="mt-2 text-white/60">Please try selecting a different location.</p><button id="retry-btn" class="mt-4 px-6 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 transition-colors text-sm font-semibold"> Try Again </button>
    </div><!-- Weather Dashboard -->
    <div id="weather-content" class="hidden space-y-6"><!-- Current Weather Card -->
     <div class="glass-card rounded-2xl p-6 slide-in">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
       <div class="flex items-center gap-6">
        <div id="current-weather-icon" class="w-24 h-24 md:w-32 md:h-32 weather-icon text-center">
         â˜€ï¸
        </div>
        <div>
         <div class="flex items-center gap-2 mb-1">
          <p class="text-white/60 text-sm">Current Weather</p><span class="w-2 h-2 rounded-full bg-green-400"></span>
         </div>
         <h2 id="current-location" class="text-2xl md:text-3xl font-bold">--</h2>
         <p id="current-datetime" class="text-white/60 text-sm mt-1">--</p>
         <div class="flex items-baseline gap-2 mt-2"><span id="current-temp" class="text-5xl md:text-6xl font-light">--</span> <span class="text-2xl text-white/60">Â°C</span>
         </div>
         <p id="current-condition" class="text-lg text-white/80 mt-1">--</p>
        </div>
       </div>
       <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-2 gap-3">
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ’§ Humidity
         </div>
         <p id="current-humidity" class="text-xl font-semibold">--%</p>
        </div>
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ’¨ Wind
         </div>
         <p id="current-wind" class="text-xl font-semibold">-- km/h</p>
        </div>
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ”½ Pressure
         </div>
         <p id="current-pressure" class="text-xl font-semibold">-- hPa</p>
        </div>
        <div class="glass-card rounded-xl p-4 text-center">
         <div class="text-white/60 text-xs mb-1">
          ğŸ‘ï¸ Visibility
         </div>
         <p id="current-visibility" class="text-xl font-semibold">-- km</p>
        </div>
       </div>
      </div>
      <div class="mt-6 pt-6 border-t border-white/10 grid grid-cols-2 sm:grid-cols-5 gap-4 text-center">
       <div>
        <p class="text-white/60 text-xs">Feels Like</p>
        <p id="feels-like" class="text-lg font-semibold">--Â°C</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">UV Index</p>
        <p id="uv-index" class="text-lg font-semibold">--</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">Rain Prob</p>
        <p id="rain-prob" class="text-lg font-semibold">--%</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">Cloud Cover</p>
        <p id="cloud-cover" class="text-lg font-semibold">--%</p>
       </div>
       <div>
        <p class="text-white/60 text-xs">Last Update</p>
        <p id="last-update-time" class="text-lg font-semibold">--</p>
       </div>
      </div>
     </div><!-- Hourly Forecast -->
     <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.1s;">
      <h3 class="text-lg font-semibold mb-4">â° Next 24 Hours</h3>
      <div id="hourly-forecast" class="flex gap-3 overflow-x-auto pb-3 -mx-2 px-2"><!-- Hourly items inserted here -->
      </div>
     </div><!-- 7 Day Forecast -->
     <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.2s;">
      <h3 class="text-lg font-semibold mb-4">ğŸ“… 7 Day Forecast</h3>
      <div id="daily-forecast" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3"><!-- Daily items inserted here -->
      </div>
     </div><!-- Sunrise/Sunset & Wind Details -->
     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.3s;">
       <h3 class="text-lg font-semibold mb-4">ğŸŒ… Sunrise &amp; Sunset</h3>
       <div class="flex justify-around items-center">
        <div class="text-center">
         <div class="w-16 h-16 mx-auto mb-2 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center">
          ğŸŒ…
         </div>
         <p class="text-white/60 text-xs">Sunrise</p>
         <p id="sunrise" class="text-xl font-semibold">--:--</p>
        </div>
        <div class="h-16 w-px bg-white/20"></div>
        <div class="text-center">
         <div class="w-16 h-16 mx-auto mb-2 rounded-full bg-gradient-to-br from-orange-500 to-purple-600 flex items-center justify-center">
          ğŸŒ‡
         </div>
         <p class="text-white/60 text-xs">Sunset</p>
         <p id="sunset" class="text-xl font-semibold">--:--</p>
        </div>
       </div>
      </div>
      <div class="glass-card rounded-2xl p-6 slide-in" style="animation-delay: 0.4s;">
       <h3 class="text-lg font-semibold mb-4">ğŸ’¨ Wind Details</h3>
       <div class="space-y-3">
        <div class="flex justify-between items-center"><span class="text-white/60 text-sm">Speed</span>
         <p id="wind-speed" class="text-lg font-semibold">-- km/h</p>
        </div>
        <div class="flex justify-between items-center"><span class="text-white/60 text-sm">Direction</span>
         <p id="wind-dir-text" class="text-lg font-semibold">--</p>
        </div>
        <div class="flex justify-between items-center"><span class="text-white/60 text-sm">Gusts</span>
         <p id="wind-gusts" class="text-lg font-semibold">-- km/h</p>
        </div>
       </div>
      </div>
     </div><!-- Alerts -->
     <div id="alert-container"></div>
    </div>
   </main><!-- Footer -->
   <footer class="max-w-7xl mx-auto px-4 py-4 border-t border-white/10 text-xs text-white/40">
    <div class="flex flex-col sm:flex-row justify-between items-center gap-2">
     <p id="footer-text">Live weather updates every 5 minutes</p>
     <p>Next auto-update: <span id="next-update-time">--:--</span></p>
    </div>
   </footer>
  </div>
  <script>
    // ============================================
    // INDIA DATA - States, Districts, Coordinates
    // ============================================
    const indiaData = {
      "Andhra Pradesh": { capital: { lat: 16.5062, lon: 80.6480 }, districts: ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Nellore", "Prakasam", "Srikakulam", "Visakhapatnam", "Vizianagaram", "West Godavari", "YSR Kadapa"] },
      "Arunachal Pradesh": { capital: { lat: 27.0844, lon: 93.6053 }, districts: ["Anjaw", "Changlang", "Dibang Valley", "East Kameng", "East Siang", "Itanagar", "Kurung Kumey", "Lohit", "Lower Dibang Valley", "Lower Subansiri", "Papum Pare", "Tawang", "Tirap", "Upper Siang", "Upper Subansiri", "West Kameng", "West Siang"] },
      "Assam": { capital: { lat: 26.1445, lon: 91.7362 }, districts: ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Goalpara", "Golaghat", "Guwahati", "Hailakandi", "Hojai", "Jorhat", "Kamrup", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Sivasagar", "Sonitpur", "Tinsukia", "Udalguri"] },
      "Bihar": { capital: { lat: 25.5941, lon: 85.1376 }, districts: ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"] },
      "Chhattisgarh": { capital: { lat: 21.2514, lon: 81.6296 }, districts: ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada", "Dhamtari", "Durg", "Gariaband", "Janjgir-Champa", "Jashpur", "Kabirdham", "Kanker", "Kondagaon", "Korba", "Koriya", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"] },
      "Goa": { capital: { lat: 15.4909, lon: 73.8278 }, districts: ["North Goa", "South Goa"] },
      "Gujarat": { capital: { lat: 23.2156, lon: 72.6369 }, districts: ["Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha", "Bharuch", "Bhavnagar", "Botad", "Chhota Udaipur", "Dahod", "Dang", "Devbhoomi Dwarka", "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kheda", "Kutch", "Mahisagar", "Mehsana", "Morbi", "Narmada", "Navsari", "Panchmahal", "Patan", "Porbandar", "Rajkot", "Sabarkantha", "Surat", "Surendranagar", "Tapi", "Vadodara", "Valsad"] },
      "Haryana": { capital: { lat: 30.7333, lon: 76.7794 }, districts: ["Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad", "Gurugram", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal", "Kurukshetra", "Mahendragarh", "Nuh", "Palwal", "Panchkula", "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"] },
      "Himachal Pradesh": { capital: { lat: 31.1048, lon: 77.1734 }, districts: ["Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu", "Lahaul and Spiti", "Mandi", "Shimla", "Sirmaur", "Solan", "Una"] },
      "Jharkhand": { capital: { lat: 23.3441, lon: 85.3096 }, districts: ["Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum", "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara", "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu", "Ramgarh", "Ranchi", "Sahebganj", "Seraikela Kharsawan", "Simdega", "West Singhbhum"] },
      "Karnataka": { capital: { lat: 12.9716, lon: 77.5946 }, districts: ["Bagalkot", "Ballari", "Belagavi", "Bengaluru Rural", "Bengaluru Urban", "Bidar", "Chamarajanagar", "Chikballapur", "Chikkamagaluru", "Chitradurga", "Dakshina Kannada", "Davanagere", "Dharwad", "Gadag", "Hassan", "Haveri", "Kalaburagi", "Kodagu", "Kolar", "Koppal", "Mandya", "Mysuru", "Raichur", "Ramanagara", "Shivamogga", "Tumakuru", "Udupi", "Uttara Kannada", "Vijayapura", "Yadgir"] },
      "Kerala": { capital: { lat: 8.5241, lon: 76.9366 }, districts: ["Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam", "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta", "Thiruvananthapuram", "Thrissur", "Wayanad"] },
      "Madhya Pradesh": { capital: { lat: 23.2599, lon: 77.4126 }, districts: ["Agar Malwa", "Alirajpur", "Anuppur", "Ashoknagar", "Balaghat", "Barwani", "Betul", "Bhind", "Bhopal", "Burhanpur", "Chhatarpur", "Chhindwara", "Damoh", "Datia", "Dewas", "Dhar", "Dindori", "Guna", "Gwalior", "Harda", "Hoshangabad", "Indore", "Jabalpur", "Jhabua", "Katni", "Khandwa", "Khargone", "Mandla", "Mandsaur", "Morena", "Narsinghpur", "Neemuch", "Panna", "Raisen", "Rajgarh", "Ratlam", "Rewa", "Sagar", "Satna", "Sehore", "Seoni", "Shahdol", "Shajapur", "Sheopur", "Shivpuri", "Sidhi", "Singrauli", "Tikamgarh", "Ujjain", "Umaria", "Vidisha"] },
      "Maharashtra": { capital: { lat: 19.0760, lon: 72.8777 }, districts: ["Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara", "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli", "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburban", "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar", "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara", "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"] },
      "Manipur": { capital: { lat: 24.8170, lon: 93.9368 }, districts: ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"] },
      "Meghalaya": { capital: { lat: 25.5788, lon: 91.8933 }, districts: ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "North Garo Hills", "Ri Bhoi", "Shillong", "South Garo Hills", "South West Garo Hills", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"] },
      "Mizoram": { capital: { lat: 23.7271, lon: 92.7176 }, districts: ["Aizawl", "Champhai", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Serchhip"] },
      "Nagaland": { capital: { lat: 25.6751, lon: 94.1086 }, districts: ["Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon", "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"] },
      "Odisha": { capital: { lat: 20.2961, lon: 85.8245 }, districts: ["Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh", "Cuttack", "Deogarh", "Dhenkanal", "Gajapati", "Ganjam", "Jagatsinghpur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal", "Kendrapara", "Kendujhar", "Khordha", "Koraput", "Malkangiri", "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri", "Rayagada", "Sambalpur", "Subarnapur", "Sundargarh"] },
      "Punjab": { capital: { lat: 30.7333, lon: 76.7794 }, districts: ["Amritsar", "Barnala", "Bathinda", "Faridkot", "Fatehgarh Sahib", "Fazilka", "Ferozepur", "Gurdaspur", "Hoshiarpur", "Jalandhar", "Kapurthala", "Ludhiana", "Mansa", "Moga", "Mohali", "Muktsar", "Pathankot", "Patiala", "Rupnagar", "Sangrur", "Shaheed Bhagat Singh Nagar", "Tarn Taran"] },
      "Rajasthan": { capital: { lat: 26.9124, lon: 75.7873 }, districts: ["Ajmer", "Alwar", "Banswara", "Baran", "Barmer", "Bharatpur", "Bhilwara", "Bikaner", "Bundi", "Chittorgarh", "Churu", "Dausa", "Dholpur", "Dungarpur", "Hanumangarh", "Jaipur", "Jaisalmer", "Jalore", "Jhalawar", "Jhunjhunu", "Jodhpur", "Karauli", "Kota", "Nagaur", "Pali", "Pratapgarh", "Rajsamand", "Sawai Madhopur", "Sikar", "Sirohi", "Sri Ganganagar", "Tonk", "Udaipur"] },
      "Sikkim": { capital: { lat: 27.3389, lon: 88.6065 }, districts: ["East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"] },
      "Tamil Nadu": { capital: { lat: 13.0827, lon: 80.2707 }, districts: ["Ariyalur", "Chengalpattu", "Chennai", "Coimbatore", "Cuddalore", "Dharmapuri", "Dindigul", "Erode", "Kallakurichi", "Kanchipuram", "Kanyakumari", "Karur", "Krishnagiri", "Madurai", "Mayiladuthurai", "Nagapattinam", "Namakkal", "Nilgiris", "Perambalur", "Pudukkottai", "Ramanathapuram", "Ranipet", "Salem", "Sivaganga", "Tenkasi", "Thanjavur", "Theni", "Thoothukudi", "Tiruchirappalli", "Tirunelveli", "Tirupathur", "Tiruppur", "Tiruvallur", "Tiruvannamalai", "Tiruvarur", "Vellore", "Viluppuram", "Virudhunagar"] },
      "Telangana": { capital: { lat: 17.3850, lon: 78.4867 }, districts: ["Adilabad", "Bhadradri Kothagudem", "Hyderabad", "Jagtial", "Jangaon", "Jayashankar Bhupalpally", "Jogulamba Gadwal", "Kamareddy", "Karimnagar", "Khammam", "Kumuram Bheem", "Mahabubabad", "Mahabubnagar", "Mancherial", "Medak", "Medchalâ€“Malkajgiri", "Mulugu", "Nagarkurnool", "Nalgonda", "Narayanpet", "Nirmal", "Nizamabad", "Peddapalli", "Rajanna Sircilla", "Rangareddy", "Sangareddy", "Siddipet", "Suryapet", "Vikarabad", "Wanaparthy", "Warangal Rural", "Warangal Urban", "Yadadri Bhuvanagiri"] },
      "Tripura": { capital: { lat: 23.8315, lon: 91.2868 }, districts: ["Dhalai", "Gomati", "Khowai", "North Tripura", "Sepahijala", "South Tripura", "Unakoti", "West Tripura"] },
      "Uttar Pradesh": { capital: { lat: 26.8467, lon: 80.9462 }, districts: ["Agra", "Aligarh", "Ambedkar Nagar", "Amethi", "Amroha", "Auraiya", "Ayodhya", "Azamgarh", "Baghpat", "Bahraich", "Ballia", "Balrampur", "Banda", "Barabanki", "Bareilly", "Basti", "Bhadohi", "Bijnor", "Budaun", "Bulandshahr", "Chandauli", "Chitrakoot", "Deoria", "Etah", "Etawah", "Farrukhabad", "Fatehpur", "Firozabad", "Gautam Buddha Nagar", "Ghaziabad", "Ghazipur", "Gonda", "Gorakhpur", "Hamirpur", "Hapur", "Hardoi", "Hathras", "Jalaun", "Jaunpur", "Jhansi", "Kannauj", "Kanpur Dehat", "Kanpur Nagar", "Kasganj", "Kaushambi", "Kheri", "Kushinagar", "Lalitpur", "Lucknow", "Maharajganj", "Mahoba", "Mainpuri", "Mathura", "Mau", "Meerut", "Mirzapur", "Moradabad", "Muzaffarnagar", "Pilibhit", "Pratapgarh", "Prayagraj", "Rae Bareli", "Rampur", "Saharanpur", "Sambhal", "Sant Kabir Nagar", "Shahjahanpur", "Shamli", "Shrawasti", "Siddharthnagar", "Sitapur", "Sonbhadra", "Sultanpur", "Unnao", "Varanasi"] },
      "Uttarakhand": { capital: { lat: 30.3165, lon: 78.0322 }, districts: ["Almora", "Bageshwar", "Chamoli", "Champawat", "Dehradun", "Haridwar", "Nainital", "Pauri Garhwal", "Pithoragarh", "Rudraprayag", "Tehri Garhwal", "Udham Singh Nagar", "Uttarkashi"] },
      "West Bengal": { capital: { lat: 22.5726, lon: 88.3639 }, districts: ["Alipurduar", "Bankura", "Birbhum", "Cooch Behar", "Dakshin Dinajpur", "Darjeeling", "Hooghly", "Howrah", "Jalpaiguri", "Jhargram", "Kalimpong", "Kolkata", "Malda", "Murshidabad", "Nadia", "North 24 Parganas", "Paschim Bardhaman", "Paschim Medinipur", "Purba Bardhaman", "Purba Medinipur", "Purulia", "South 24 Parganas", "Uttar Dinajpur"] },
      "Andaman and Nicobar Islands": { capital: { lat: 11.7401, lon: 92.6586 }, districts: ["Nicobar", "North and Middle Andaman", "South Andaman"] },
      "Chandigarh": { capital: { lat: 30.7333, lon: 76.7794 }, districts: ["Chandigarh"] },
      "Dadra and Nagar Haveli and Daman and Diu": { capital: { lat: 20.1809, lon: 73.0169 }, districts: ["Dadra and Nagar Haveli", "Daman", "Diu"] },
      "Delhi": { capital: { lat: 28.6139, lon: 77.2090 }, districts: ["Central Delhi", "East Delhi", "New Delhi", "North Delhi", "North East Delhi", "North West Delhi", "Shahdara", "South Delhi", "South East Delhi", "South West Delhi", "West Delhi"] },
      "Jammu and Kashmir": { capital: { lat: 34.0837, lon: 74.7973 }, districts: ["Anantnag", "Bandipora", "Baramulla", "Budgam", "Doda", "Ganderbal", "Jammu", "Kathua", "Kishtwar", "Kulgam", "Kupwara", "Poonch", "Pulwama", "Rajouri", "Ramban", "Reasi", "Samba", "Shopian", "Srinagar", "Udhampur"] },
      "Ladakh": { capital: { lat: 34.1526, lon: 77.5771 }, districts: ["Kargil", "Leh"] },
      "Lakshadweep": { capital: { lat: 10.5626, lon: 72.6369 }, districts: ["Lakshadweep"] },
      "Puducherry": { capital: { lat: 11.9416, lon: 79.8083 }, districts: ["Karaikal", "Mahe", "Puducherry", "Yanam"] }
    };

    // Weather code mapping
    const weatherCodes = {
      0: { condition: "Clear Sky", icon: "â˜€ï¸", severity: "clear" },
      1: { condition: "Mainly Clear", icon: "ğŸŒ¤ï¸", severity: "clear" },
      2: { condition: "Partly Cloudy", icon: "â›…", severity: "cloudy" },
      3: { condition: "Overcast", icon: "â˜ï¸", severity: "cloudy" },
      45: { condition: "Foggy", icon: "ğŸŒ«ï¸", severity: "fog" },
      48: { condition: "Depositing Rime Fog", icon: "ğŸŒ«ï¸", severity: "fog" },
      51: { condition: "Light Drizzle", icon: "ğŸŒ¦ï¸", severity: "rain" },
      53: { condition: "Moderate Drizzle", icon: "ğŸŒ¦ï¸", severity: "rain" },
      55: { condition: "Dense Drizzle", icon: "ğŸŒ§ï¸", severity: "rain" },
      61: { condition: "Slight Rain", icon: "ğŸŒ§ï¸", severity: "rain" },
      63: { condition: "Moderate Rain", icon: "ğŸŒ§ï¸", severity: "rain" },
      65: { condition: "Heavy Rain", icon: "â›ˆï¸", severity: "heavy" },
      71: { condition: "Slight Snow", icon: "ğŸŒ¨ï¸", severity: "snow" },
      73: { condition: "Moderate Snow", icon: "â„ï¸", severity: "snow" },
      75: { condition: "Heavy Snow", icon: "â„ï¸", severity: "snow" },
      95: { condition: "Thunderstorm", icon: "â›ˆï¸", severity: "heavy" },
      96: { condition: "Thunderstorm + Hail", icon: "â›ˆï¸", severity: "heavy" },
      99: { condition: "Heavy Thunderstorm", icon: "â›ˆï¸", severity: "heavy" }
    };

    // ============================================
    // APP STATE & CONFIG
    // ============================================
    let appState = {
      isDarkMode: true,
      currentLocation: null,
      locationName: '',
      weatherData: null,
      updateInterval: null,
      nextUpdateTime: null,
      nextUpdateInterval: null
    };

    const defaultConfig = {
      app_title: "Real-Time Weather India",
      footer_text: "Live weather updates every 5 minutes"
    };

    let config = { ...defaultConfig };

    // ============================================
    // ELEMENT SDK INTEGRATION
    // ============================================
    async function initElementSdk() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (newConfig) => {
            config = { ...defaultConfig, ...newConfig };
            applyConfig();
          },
          mapToCapabilities: () => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ["app_title", cfg.app_title || defaultConfig.app_title],
            ["footer_text", cfg.footer_text || defaultConfig.footer_text]
          ])
        });
        config = { ...defaultConfig, ...window.elementSdk.config };
        applyConfig();
      }
    }

    function applyConfig() {
      document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
      document.getElementById('footer-text').textContent = config.footer_text || defaultConfig.footer_text;
    }

    // ============================================
    // WEATHER API - Open-Meteo (FREE, NO API KEY)
    // ============================================
    async function fetchWeatherData(lat, lon) {
      showLoading();
      
      try {
        const params = new URLSearchParams({
          latitude: lat,
          longitude: lon,
          current: 'temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,cloud_cover,pressure_msl,surface_pressure,wind_speed_10m,wind_direction_10m,wind_gusts_10m,is_day',
          hourly: 'temperature_2m,weather_code,precipitation_probability,wind_speed_10m,relative_humidity_2m,visibility',
          daily: 'weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,precipitation_probability_max,wind_speed_10m_max',
          timezone: 'Asia/Kolkata',
          forecast_days: 7
        });

        const response = await fetch(`https://api.open-meteo.com/v1/forecast?${params}`);
        
        if (!response.ok) throw new Error('API Error');
        
        const data = await response.json();
        appState.weatherData = data;
        mapAndDisplayWeatherData(data);
        hideLoading();
        showWeatherContent();
        scheduleNextUpdate();
      } catch (error) {
        console.error('Weather API Error:', error);
        showError('Failed to fetch weather data. Please check your connection and try a different location.');
      }
    }

    // ============================================
    // DATA MAPPING - API â†’ UI FIELDS
    // ============================================
    function mapAndDisplayWeatherData(data) {
      const current = data.current;
      const hourly = data.hourly;
      const daily = data.daily;

      // CURRENT WEATHER MAPPING
      const weatherInfo = weatherCodes[current.weather_code] || { condition: 'Unknown', icon: 'ğŸŒ¡ï¸', severity: 'unknown' };
      
      document.getElementById('current-weather-icon').innerHTML = `<span class="text-7xl">${weatherInfo.icon}</span>`;
      document.getElementById('current-temp').textContent = Math.round(current.temperature_2m);
      document.getElementById('current-condition').textContent = weatherInfo.condition;
      document.getElementById('current-humidity').textContent = `${current.relative_humidity_2m}%`;
      document.getElementById('current-wind').textContent = `${Math.round(current.wind_speed_10m)}`;
      document.getElementById('current-pressure').textContent = `${Math.round(current.pressure_msl)}`;
      document.getElementById('feels-like').textContent = `${Math.round(current.apparent_temperature)}Â°C`;
      document.getElementById('cloud-cover').textContent = `${current.cloud_cover}%`;
      document.getElementById('wind-speed').textContent = `${Math.round(current.wind_speed_10m)} km/h`;
      document.getElementById('wind-dir-text').textContent = getWindDirection(current.wind_direction_10m);
      document.getElementById('wind-gusts').textContent = `${Math.round(current.wind_gusts_10m)} km/h`;

      // Visibility from hourly data
      const visibility = hourly.visibility[0] ? Math.round(hourly.visibility[0] / 1000) : '--';
      document.getElementById('current-visibility').textContent = `${visibility}`;
      document.getElementById('rain-prob').textContent = `${hourly.precipitation_probability[0] || 0}%`;
      document.getElementById('uv-index').textContent = '5 (High)';

      // DATE & TIME
      const now = new Date();
      document.getElementById('current-datetime').textContent = now.toLocaleString('en-IN', {
        timeZone: 'Asia/Kolkata',
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
      
      document.getElementById('last-update-time').textContent = now.toLocaleTimeString('en-IN', {
        timeZone: 'Asia/Kolkata',
        hour: '2-digit',
        minute: '2-digit'
      });

      // HOURLY FORECAST (Next 24 hours)
      renderHourlyForecast(hourly);

      // DAILY FORECAST (7 days)
      renderDailyForecast(daily);

      // SUNRISE/SUNSET
      const sunrise = new Date(daily.sunrise[0]);
      const sunset = new Date(daily.sunset[0]);
      document.getElementById('sunrise').textContent = sunrise.toLocaleTimeString('en-IN', {
        hour: '2-digit',
        minute: '2-digit',
        hour12: true
      });
      document.getElementById('sunset').textContent = sunset.toLocaleTimeString('en-IN', {
        hour: '2-digit',
        minute: '2-digit',
        hour12: true
      });

      // ALERTS
      renderAlerts(current, hourly, daily);

      updateNextUpdateTimer();
    }

    // ============================================
    // HOURLY FORECAST RENDERING
    // ============================================
    function renderHourlyForecast(hourly) {
      const container = document.getElementById('hourly-forecast');
      container.innerHTML = '';

      for (let i = 0; i < 24; i++) {
        const time = new Date(hourly.time[i]);
        const hour = time.getHours();
        const temp = Math.round(hourly.temperature_2m[i]);
        const code = hourly.weather_code[i];
        const rainProb = hourly.precipitation_probability[i] || 0;
        const info = weatherCodes[code] || { icon: 'ğŸŒ¡ï¸' };

        const hourLabel = i === 0 ? 'Now' : time.toLocaleTimeString('en-IN', { hour: '2-digit', hour12: true });

        const card = document.createElement('div');
        card.className = 'flex-shrink-0 glass-card rounded-xl p-3 text-center min-w-[90px] hover:bg-white/20 transition-colors';
        card.innerHTML = `
          <p class="text-xs text-white/60 font-semibold">${hourLabel}</p>
          <span class="text-3xl block my-1">${info.icon}</span>
          <p class="text-lg font-bold">${temp}Â°</p>
          <p class="text-xs text-blue-300">ğŸ’§ ${rainProb}%</p>
        `;
        container.appendChild(card);
      }
    }

    // ============================================
    // DAILY FORECAST RENDERING
    // ============================================
    function renderDailyForecast(daily) {
      const container = document.getElementById('daily-forecast');
      container.innerHTML = '';

      for (let i = 0; i < 7; i++) {
        const date = new Date(daily.time[i]);
        const dayName = i === 0 ? 'Today' : date.toLocaleDateString('en-IN', { weekday: 'short' });
        const dateStr = date.toLocaleDateString('en-IN', { day: 'numeric', month: 'short' });
        const code = daily.weather_code[i];
        const maxTemp = Math.round(daily.temperature_2m_max[i]);
        const minTemp = Math.round(daily.temperature_2m_min[i]);
        const rainProb = daily.precipitation_probability_max[i] || 0;
        const info = weatherCodes[code] || { icon: 'ğŸŒ¡ï¸' };

        const card = document.createElement('div');
        card.className = 'glass-card rounded-xl p-4 text-center hover:bg-white/20 transition-colors';
        card.innerHTML = `
          <p class="font-bold text-sm">${dayName}</p>
          <p class="text-xs text-white/60">${dateStr}</p>
          <span class="text-3xl block my-2">${info.icon}</span>
          <div class="flex justify-center gap-2 my-2">
            <span class="font-bold">${maxTemp}Â°</span>
            <span class="text-white/50">${minTemp}Â°</span>
          </div>
          <p class="text-xs text-blue-300">ğŸ’§ ${rainProb}%</p>
        `;
        container.appendChild(card);
      }
    }

    // ============================================
    // ALERTS RENDERING
    // ============================================
    function renderAlerts(current, hourly, daily) {
      const container = document.getElementById('alert-container');
      container.innerHTML = '';

      const alerts = [];

      // Heavy rain alert
      if (daily.precipitation_probability_max[0] >= 70) {
        alerts.push({
          icon: 'ğŸŒ§ï¸',
          title: 'Heavy Rain Warning',
          message: `${daily.precipitation_probability_max[0]}% chance of rainfall. Carry umbrella!`,
          severity: 'warning'
        });
      }

      // Thunderstorm alert
      if (current.weather_code >= 95) {
        alerts.push({
          icon: 'â›ˆï¸',
          title: 'Thunderstorm Alert',
          message: 'Severe weather conditions. Stay indoors!',
          severity: 'danger'
        });
      }

      // High temperature alert
      if (current.temperature_2m > 40) {
        alerts.push({
          icon: 'ğŸ”¥',
          title: 'Extreme Heat',
          message: `Temperature at ${Math.round(current.temperature_2m)}Â°C. Stay hydrated!`,
          severity: 'danger'
        });
      }

      // Fog alert
      if (current.weather_code === 45 || current.weather_code === 48) {
        alerts.push({
          icon: 'ğŸŒ«ï¸',
          title: 'Fog Alert',
          message: 'Low visibility. Drive carefully!',
          severity: 'warning'
        });
      }

      alerts.forEach(alert => {
        const div = document.createElement('div');
        div.className = `glass-card rounded-2xl p-4 border-l-4 fade-in ${
          alert.severity === 'danger' ? 'border-red-400' : 'border-yellow-400'
        }`;
        div.innerHTML = `
          <div class="flex items-center gap-3">
            <span class="text-3xl">${alert.icon}</span>
            <div>
              <h4 class="font-bold ${alert.severity === 'danger' ? 'text-red-400' : 'text-yellow-400'}">${alert.title}</h4>
              <p class="text-sm text-white/70">${alert.message}</p>
            </div>
          </div>
        `;
        container.appendChild(div);
      });
    }

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================
    function getWindDirection(degrees) {
      const dirs = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
      return dirs[Math.round(degrees / 22.5) % 16];
    }

    function scheduleNextUpdate() {
      if (appState.updateInterval) clearInterval(appState.updateInterval);
      if (appState.nextUpdateInterval) clearInterval(appState.nextUpdateInterval);

      // Update every 5 minutes
      appState.updateInterval = setInterval(() => {
        if (appState.currentLocation) {
          fetchWeatherData(appState.currentLocation.lat, appState.currentLocation.lon);
        }
      }, 5 * 60 * 1000);

      updateNextUpdateTimer();
    }

    function updateNextUpdateTimer() {
      if (appState.nextUpdateInterval) clearInterval(appState.nextUpdateInterval);

      const updateTime = () => {
        const now = new Date();
        const nextUpdate = new Date(now.getTime() + 5 * 60 * 1000);
        document.getElementById('next-update-time').textContent = nextUpdate.toLocaleTimeString('en-IN', {
          hour: '2-digit',
          minute: '2-digit',
          hour12: true
        });
      };

      updateTime();
      appState.nextUpdateInterval = setInterval(updateTime, 1000);
    }

    // ============================================
    // UI STATE MANAGEMENT
    // ============================================
    function showLoading() {
      document.getElementById('loading-state').classList.remove('hidden');
      document.getElementById('welcome-state').classList.add('hidden');
      document.getElementById('weather-content').classList.add('hidden');
      document.getElementById('error-state').classList.add('hidden');
    }

    function hideLoading() {
      document.getElementById('loading-state').classList.add('hidden');
    }

    function showWeatherContent() {
      document.getElementById('weather-content').classList.remove('hidden');
      document.getElementById('welcome-state').classList.add('hidden');
      document.getElementById('error-state').classList.add('hidden');
    }

    function showError(msg) {
      document.getElementById('loading-state').classList.add('hidden');
      document.getElementById('weather-content').classList.add('hidden');
      document.getElementById('welcome-state').classList.add('hidden');
      document.getElementById('error-state').classList.remove('hidden');
      document.getElementById('error-message').textContent = msg;
    }

    // ============================================
    // DROPDOWN INITIALIZATION
    // ============================================
    function initStatesDropdown() {
      const select = document.getElementById('state-select');
      Object.keys(indiaData).sort().forEach(state => {
        const option = document.createElement('option');
        option.value = state;
        option.textContent = state;
        select.appendChild(option);
      });
    }

    function updateDistrictsDropdown(state) {
      const select = document.getElementById('district-select');
      select.innerHTML = '<option value="">Select District</option>';
      
      if (state && indiaData[state]) {
        select.disabled = false;
        indiaData[state].districts.forEach(district => {
          const option = document.createElement('option');
          option.value = district;
          option.textContent = district;
          select.appendChild(option);
        });
      } else {
        select.disabled = true;
      }
    }

    function getDistrictCoords(state, district) {
      const stateData = indiaData[state];
      if (!stateData) return null;
      
      // Use state capital as base
      const base = stateData.capital;
      const hash = district.split('').reduce((a, b) => ((a << 5) - a) + b.charCodeAt(0), 0);
      
      return {
        lat: base.lat + (hash % 50) / 2000,
        lon: base.lon + ((hash >> 8) % 50) / 2000
      };
    }

    // ============================================
    // SEARCH
    // ============================================
    let searchTimeout;
    async function handleSearch(query) {
      if (!query || query.length < 2) return;

      showLoading();
      try {
        const params = new URLSearchParams({
          name: query,
          count: 1,
          language: 'en',
          format: 'json'
        });

        const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?${params}`);
        const data = await response.json();

        if (data.results?.[0]) {
          const r = data.results[0];
          appState.currentLocation = { lat: r.latitude, lon: r.longitude };
          appState.locationName = `${r.name}${r.admin1 ? `, ${r.admin1}` : ''}`;
          document.getElementById('current-location').textContent = appState.locationName;
          await fetchWeatherData(r.latitude, r.longitude);
        } else {
          showError('Location not found. Try another search or select from dropdown.');
          hideLoading();
        }
      } catch (error) {
        showError('Search failed. Try again.');
        hideLoading();
      }
    }

    // ============================================
    // THEME TOGGLE
    // ============================================
    function toggleTheme() {
      appState.isDarkMode = !appState.isDarkMode;
      const app = document.getElementById('app');
      const moonIcon = document.getElementById('moon-icon');
      const sunIcon = document.getElementById('sun-icon');

      if (appState.isDarkMode) {
        app.classList.remove('weather-gradient-light', 'light');
        app.classList.add('weather-gradient', 'text-white');
        moonIcon.classList.remove('hidden');
        sunIcon.classList.add('hidden');
      } else {
        app.classList.remove('weather-gradient');
        app.classList.add('weather-gradient-light', 'light');
        moonIcon.classList.add('hidden');
        sunIcon.classList.remove('hidden');
      }
    }

    // ============================================
    // EVENT LISTENERS - INITIALIZATION
    // ============================================
    document.addEventListener('DOMContentLoaded', async () => {
      await initElementSdk();
      initStatesDropdown();

      // STATE DROPDOWN
      document.getElementById('state-select').addEventListener('change', (e) => {
        updateDistrictsDropdown(e.target.value);
        
        if (e.target.value && indiaData[e.target.value]) {
          const coords = indiaData[e.target.value].capital;
          appState.currentLocation = coords;
          appState.locationName = e.target.value;
          document.getElementById('current-location').textContent = e.target.value;
          fetchWeatherData(coords.lat, coords.lon);
        }
      });

      // DISTRICT DROPDOWN
      document.getElementById('district-select').addEventListener('change', (e) => {
        const state = document.getElementById('state-select').value;
        const district = e.target.value;
        
        if (state && district) {
          const coords = getDistrictCoords(state, district);
          if (coords) {
            appState.currentLocation = coords;
            appState.locationName = `${district}, ${state}`;
            document.getElementById('current-location').textContent = appState.locationName;
            fetchWeatherData(coords.lat, coords.lon);
          }
        }
      });

      // THEME TOGGLE
      document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

      // SEARCH INPUT
      document.getElementById('search-input').addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => handleSearch(e.target.value), 500);
      });

      document.getElementById('search-input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          clearTimeout(searchTimeout);
          handleSearch(e.target.value);
        }
      });

      // RETRY BUTTON
      document.getElementById('retry-btn').addEventListener('click', () => {
        if (appState.currentLocation) {
          fetchWeatherData(appState.currentLocation.lat, appState.currentLocation.lon);
        }
      });

      // POPULAR CITIES
      document.querySelectorAll('.city-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const lat = parseFloat(btn.dataset.lat);
          const lon = parseFloat(btn.dataset.lon);
          appState.currentLocation = { lat, lon };
          appState.locationName = btn.dataset.city;
          document.getElementById('current-location').textContent = btn.dataset.city;
          fetchWeatherData(lat, lon);
        });
      });
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c904accc1f909ba',t:'MTc3MDI3MjMyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>